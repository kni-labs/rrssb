/*
 Ridiculously Responsive Social Sharing Buttons
 Team: @dbox, @joshuatuscan
 Site: http://www.kurtnoble.com/labs/rrssb
 Twitter: @therealkni

        ___           ___
       /__/|         /__/\        ___
      |  |:|         \  \:\      /  /\
      |  |:|          \  \:\    /  /:/
    __|  |:|      _____\__\:\  /__/::\
   /__/\_|:|____ /__/::::::::\ \__\/\:\__
   \  \:\/:::::/ \  \:\~~\~~\/    \  \:\/\
    \  \::/~~~~   \  \:\  ~~~      \__\::/
     \  \:\        \  \:\          /__/:/
      \  \:\        \  \:\         \__\/
       \__\/         \__\/
*/
+(function(f,e,b){var l={calc:false};e.fn.rrssb=function(p){var r=e.extend({description:b,emailAddress:b,emailBody:b,emailSubject:b,image:b,title:b,url:b},p);r.emailSubject=r.emailSubject||r.title;r.emailBody=r.emailBody||((r.description?r.description:"")+(r.url?"\n\n"+r.url:""));for(var q in r){if(r.hasOwnProperty(q)&&r[q]!==b){r[q]=j(r[q])}}if(r.url!==b){e(this).find(".rrssb-facebook a").attr("href","https://www.facebook.com/sharer/sharer.php?u="+r.url);e(this).find(".rrssb-tumblr a").attr("href","http://tumblr.com/share/link?url="+r.url+(r.title!==b?"&name="+r.title:"")+(r.description!==b?"&description="+r.description:""));e(this).find(".rrssb-linkedin a").attr("href","http://www.linkedin.com/shareArticle?mini=true&url="+r.url+(r.title!==b?"&title="+r.title:"")+(r.description!==b?"&summary="+r.description:""));e(this).find(".rrssb-twitter a").attr("href","https://twitter.com/intent/tweet?text="+(r.description!==b?r.description:"")+"%20"+r.url);e(this).find(".rrssb-hackernews a").attr("href","https://news.ycombinator.com/submitlink?u="+r.url+(r.title!==b?"&text="+r.title:""));e(this).find(".rrssb-reddit a").attr("href","http://www.reddit.com/submit?url="+r.url+(r.description!==b?"&text="+r.description:"")+(r.title!==b?"&title="+r.title:""));e(this).find(".rrssb-googleplus a").attr("href","https://plus.google.com/share?url="+(r.description!==b?r.description:"")+"%20"+r.url);e(this).find(".rrssb-pinterest a").attr("href","http://pinterest.com/pin/create/button/?url="+r.url+((r.image!==b)?"&amp;media="+r.image:"")+(r.description!==b?"&description="+r.description:""));e(this).find(".rrssb-pocket a").attr("href","https://getpocket.com/save?url="+r.url);e(this).find(".rrssb-github a").attr("href",r.url);e(this).find(".rrssb-whatsapp a").attr("href","whatsapp://send?text="+(r.description!==b?r.description+"%20":(r.title!==b?r.title+"%20":""))+r.url)}if(r.emailAddress!==b||r.emailSubject){e(this).find(".rrssb-email a").attr("href","mailto:"+(r.emailAddress?r.emailAddress:"")+"?"+(r.emailSubject!==b?"subject="+r.emailSubject:"")+(r.emailBody!==b?"&body="+r.emailBody:""))}};var d=function(){var r=e("<div>");var q=["calc","-webkit-calc","-moz-calc"];e("body").append(r);for(var p=0;p<q.length;p++){r.css("width",q[p]+"(1px)");if(r.width()===1){l.calc=q[p];break}}r.remove()};var j=function(p){if(p!==b&&p!==null){if(p.match(/%[0-9a-f]{2}/i)!==null){p=decodeURIComponent(p);j(p)}else{return encodeURIComponent(p)}}};var g=function(){e(".rrssb-buttons").each(function(r){var q=e(this);var t=e("li:visible",q);var s=t.length;var p=100/s;t.css("width",p+"%").attr("data-initwidth",p)})};var o=function(){e(".rrssb-buttons").each(function(q){var p=e(this);var t=p.width();var u=e("li",p).not(".small").eq(0).width();var r=e("li.small",p).length;if(u>170&&r<1){p.addClass("large-format");var s=u/12+"px";p.css("font-size",s)}else{p.removeClass("large-format");p.css("font-size","")}if(t<r*25){p.removeClass("small-format").addClass("tiny-format")}else{p.removeClass("tiny-format")}})};var m=function(){e(".rrssb-buttons").each(function(u){var A=e(this);var w=e("li",A);var x=w.filter(".small");var s=0;var z=0;var v=x.eq(0);var q=parseFloat(v.attr("data-size"))+55;var r=x.length;if(r===w.length){var p=r*42;var y=A.width();if((p+q)<y){A.removeClass("small-format");x.eq(0).removeClass("small");k()}}else{w.not(".small").each(function(B){var C=e(this);var E=parseFloat(C.attr("data-size"))+55;var D=parseFloat(C.width());s=s+D;z=z+E});var t=s-z;if(q<t){v.removeClass("small");k()}}})};var c=function(p){e(".rrssb-buttons").each(function(r){var q=e(this);var s=e("li",q);e(s.get().reverse()).each(function(u,y){var v=e(this);if(v.hasClass("small")===false){var x=parseFloat(v.attr("data-size"))+55;var w=parseFloat(v.width());if(x>w){var t=s.not(".small").last();e(t).addClass("small");k()}}if(!--y){m()}})});if(p===true){n(k)}};var k=function(){e(".rrssb-buttons").each(function(u){var y=e(this);var t;var q;var s;var r;var v;var x=e("li",y);var w=x.filter(".small");var p=w.length;if(p>0&&p!==x.length){y.removeClass("small-format");w.css("width","42px");s=p*42;t=x.not(".small").length;q=100/t;v=s/t;if(l.calc===false){r=((y.innerWidth()-1)/t)-v;r=Math.floor(r*1000)/1000;r+="px"}else{r=l.calc+"("+q+"% - "+v+"px)"}x.not(".small").css("width",r)}else{if(p===x.length){y.addClass("small-format");g()}else{y.removeClass("small-format");g()}}});o()};var a=function(){e(".rrssb-buttons").each(function(p){e(this).addClass("rrssb-"+(p+1))});d();g();e(".rrssb-buttons li .rrssb-text").each(function(p){var q=e(this);var r=q.width();q.closest("li").attr("data-size",r)});c(true)};var n=function(p){e(".rrssb-buttons li.small").removeClass("small");c();p()};var i=function(p,y,z,t){var x=f.screenLeft!==b?f.screenLeft:screen.left;var q=f.screenTop!==b?f.screenTop:screen.top;var r=f.innerWidth?f.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var A=f.innerHeight?f.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var s=((r/2)-(z/2))+x;var v=((A/3)-(t/3))+q;var u=f.open(p,y,"scrollbars=yes, width="+z+", height="+t+", top="+v+", left="+s);if(u&&u.focus){u.focus()}};var h=(function(){var p={};return function(s,q,r){if(!r){r="Don't call this twice without a uniqueId"}if(p[r]){clearTimeout(p[r])}p[r]=setTimeout(s,q)}})();e(document).ready(function(){try{e(document).on("click",".rrssb-buttons a.popup",{},function p(s){var r=e(this);i(r.attr("href"),r.find(".rrssb-text").html(),580,470);s.preventDefault()})}catch(q){}e(f).resize(function(){n(k);h(function(){n(k)},200,"finished resizing")});a()});f.rrssbInit=a})(window,jQuery);