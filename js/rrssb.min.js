/*
 Ridiculously Responsive Social Sharing Buttons
 Team: @dbox, @joshuatuscan
 Site: http://www.kurtnoble.com/labs/rrssb
 Twitter: @therealkni

        ___           ___
       /__/|         /__/\        ___
      |  |:|         \  \:\      /  /\
      |  |:|          \  \:\    /  /:/
    __|  |:|      _____\__\:\  /__/::\
   /__/\_|:|____ /__/::::::::\ \__\/\:\__
   \  \:\/:::::/ \  \:\~~\~~\/    \  \:\/\
    \  \::/~~~~   \  \:\  ~~~      \__\::/
     \  \:\        \  \:\          /__/:/
      \  \:\        \  \:\         \__\/
       \__\/         \__\/
*/(function(d,l,b){var e=function(){l(".rrssb-buttons").each(function(o){var n=l(this);var p=l("li",n).length;var m=100/p;l("li",n).css("width",m+"%").attr("data-initwidth",m)})};var k=function(){l(".rrssb-buttons").each(function(n){var m=l(this);var p=parseFloat(l(m).width());var q=l("li",m).not(".small").first().width();var o=l("li.small",m).length;if(q>170&&o<1){l(m).addClass("large-format")}else{l(m).removeClass("large-format")}if(p<200){l(m).removeClass("small-format").addClass("tiny-format")}else{l(m).removeClass("tiny-format")}})};var i=function(){l(".rrssb-buttons").each(function(r){var v=l(this);var p=0,u=0,s,n;var o=l("li.small",v).length;if(o===l("li",v).length){var m=o*42;var t=parseFloat(l(v).width());s=l("li.small",v).first();n=parseFloat(l(s).attr("data-size"))+55;if((m+n)<t){l(v).removeClass("small-format");l("li.small",v).first().removeClass("small");h()}}else{l("li",v).not(".small").each(function(w){var y=parseFloat(l(this).attr("data-size"))+55;var x=parseFloat(l(this).width());p=p+x;u=u+y});var q=p-u;s=l("li.small",v).first();n=parseFloat(l(s).attr("data-size"))+55;if(n<q){l(s).removeClass("small");h()}}})};var c=function(m){l(".rrssb-buttons").each(function(p){var o=l(this);var n=l("li",o).nextAll(),q=n.length;l(l("li",o).get().reverse()).each(function(s,v){if(l(this).hasClass("small")===false){var u=parseFloat(l(this).attr("data-size"))+55;var t=parseFloat(l(this).width());if(u>t){var r=l("li",o).not(".small").last();l(r).addClass("small");h()}}if(!--v){i()}})});if(m===true){j(h)}};var h=function(){l(".rrssb-buttons").each(function(p){var o=l(this);var t,m,n,s,q;var r=l("li.small",o).length;if(r>0&&r!==l("li",o).length){l(o).removeClass("small-format");l("li.small",o).css("width","42px");n=r*42;t=l("li",o).not(".small").length;m=100/t;q=n/t;if(navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("Safari")>=0){s="-webkit-calc("+m+"% - "+q+"px)"}else{if(navigator.userAgent.indexOf("Firefox")>=0){s="-moz-calc("+m+"% - "+q+"px)"}else{s="calc("+m+"% - "+q+"px)"}}l("li",o).not(".small").css("width",s)}else{if(r===l("li",o).length){l(o).addClass("small-format");e()}else{l(o).removeClass("small-format");e()}}});k()};var a=function(){l(".rrssb-buttons").each(function(m){l(this).addClass("rrssb-"+(m+1))});e();l(".rrssb-buttons li .text").each(function(m){var n=parseFloat(l(this).width());l(this).closest("li").attr("data-size",n)});c(true)};var j=function(m){l(".rrssb-buttons li.small").removeClass("small");c();m()};var g=function(m,u,v,q){var t=d.screenLeft!==b?d.screenLeft:screen.left;var n=d.screenTop!==b?d.screenTop:screen.top;var o=d.innerWidth?d.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width;var x=d.innerHeight?d.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height;var p=((o/2)-(v/2))+t;var s=((x/3)-(q/3))+n;var r=d.open(m,u,"scrollbars=yes, width="+v+", height="+q+", top="+s+", left="+p);if(d.focus){r.focus()}};var f=(function(){var m={};return function(p,n,o){if(!o){o="Don't call this twice without a uniqueId"}if(m[o]){clearTimeout(m[o])}m[o]=setTimeout(p,n)}})();l(d).resize(function(){j(h);f(function(){j(h)},200,"finished resizing")});l(document).ready(function(){a();l(".rrssb-buttons a.popup").on("click",function(m){var n=l(this);g(n.attr("href"),n.find(".text").html(),580,470);m.preventDefault()})})})(window,jQuery);
